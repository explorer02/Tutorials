<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        function deepCopy(src) {
            dest = []
            for (let i = 0; i < src.length; i++) {
                dest.push(JSON.parse(JSON.stringify(src[i])));
            }
            return dest;
        }

        function StudentDOM(studs) {
            this.studs = deepCopy(studs);
            this.time = 2000;
            this.lastCopy = deepCopy(studs);
            this.reflectChanges()
            this.timerID = setInterval(() => {
                if (this.detectChanges()) {
                    this.reflectChanges();
                }
            }, this.time)
        }
        function getStudentByID(id) {
            for (let stud of this.studs) {
                if (stud.id == id) {
                    return stud;
                }
            }
            return null;
        }
        function appendStudent(stud) {
            this.studs.push(stud)
        }
        function removeStudent(id) {
            for (let i = 0; i < this.studs.length; i++) {
                if (this.studs[i].id == id) {
                    this.studs.splice(i, 1);
                    return;
                }
            }
        }
        function detectChanges() {
            if (this.studs.length != this.lastCopy.length)
                return true;
            for (let i = 0; i < this.studs.length; i++) {
                for (let prop in this.studs[i]) {
                    if (this.studs[i][prop] !== this.lastCopy[i][prop]) {
                        return true;
                    }
                }
            }
            return false
        }
        function reflectChanges() {
            this.lastCopy = deepCopy(this.studs)
            console.log(this.studs);
        }

        StudentDOM.prototype = { getStudentByID, appendStudent, removeStudent, detectChanges, reflectChanges }

        let studs = [
            { id: 1, name: "ABC" },
            { id: 2, name: "DEF" },
            { id: 3, name: "GHI" },
            { id: 4, name: "JKL" }
        ]

        dom = new StudentDOM(studs);

        let stud = { id: 5, name: "MNO" };



    </script>
</body>

</html>